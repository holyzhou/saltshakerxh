{% extends "base.html" %}
{% block content %}

<div id="page-wrapper">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Pre Ops</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
    <div class="row">
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    预发部署
                </div>
                <div class="panel-body">
                    <div class="row">
                        <div class="col-lg-5">
                            <form class="form-inline" method="get" action="../execute/minions_pre_result">
                                <div class="form-group">
                                    <label>应用名</label>
                                    <select class="form-control" id="project_id" name="pj_name">
                                        {% for i in applist%}
                                        <option value='{{i}}'>{{i}}</option>
                                        {% endfor %}
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>最新md5值</label>
                                    <input type="text" class="form-control" id="md5_id" name="md5_value"
                                           placeholder="3f18cdc5d988daf98ac23f1a00fc8a84">
                                </div>
                                <input id="submit_id" type="button" class="btn btn-primary" value="部署">
                            </form>
                            <p id="p_id"></p>
                        </div>
                    </div>
                    <!-- /.row (nested) -->
                </div>
                <!-- /.panel-body -->
            </div>
            <!-- /.panel -->
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <!-- /.row -->
</div>
<!-- /#page-wrapper -->

</div>
<!-- /#wrapper -->
<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
<script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
<script src="//cdn.bootcss.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
<script type="text/javascript">
    $(function () {
                $("#submit_id").click(function () {
                    var project_name = document.getElementById("project_id").value;
                    var md5_value = document.getElementById("md5_id").value;
                    var url = "/execute/minions_pre_result?pj_name=" + project_name + "&md5_value=" + md5_value;
                    $.ajax({
                        type: "get",
                        url: url,
                        success: function (msg) {
                            $('#p_id').append('<p>' + msg + '</p>');
                        }
                    })
                })
            }
    )
</script>

{% endblock %}

